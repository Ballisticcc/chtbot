<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ballistic AI Chatbot</title>
  <style>
    body { background: #1a1a2e; color: #e0e0e0; font-family: sans-serif; margin: 0; padding: 20px; }
    .chatbox { max-width: 600px; margin: auto; display: flex; flex-direction: column; height: 80vh; }
    #messages { flex: 1; overflow-y: auto; padding: 10px; background: #0f3460; border-radius: 10px; } 
    .message { padding: 8px; margin: 4px 0; border-radius: 6px; }
    .user { background: #533483; text-align: right; }
    .bot { background: #38bdf8; text-align: left; color: #000; }
    .controls { display: flex; margin-top: 10px; }
    input { flex: 1; padding: 10px; border-radius: 6px; border: none; }
    button { padding: 10px 15px; margin-left: 10px; border-radius: 6px; background: #38bdf8; border: none; color: #000; cursor: pointer; }
    .quick-buttons { display: flex; flex-wrap: wrap; gap: 8px; margin: 10px 0; }
    .quick-buttons button { background: #533483; color: #e0e0e0; border: none; padding: 8px; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>ðŸ¤– Ballistic AI</h1>
  <div class="chatbox">
    <div id="messages"></div>
    <div class="quick-buttons">
      <button onclick="sendPreset('What is AI?')">What is AI?</button>
      <button onclick="sendPreset('Explain AI Factory')">AI Factory</button>
      <button onclick="sendPreset('Role of AI in commerce')">AI in Commerce</button>
      <button onclick="sendPreset('Role of AI in medicine')">AI in Medicine</button>
      <button onclick="sendPreset('Tell me a joke')">Joke</button>
    </div>
    <div class="controls">
      <input id="userInput" placeholder="Ask anything..." />
      <button onclick="sendCurrent()">Send</button>
    </div>
  </div>

  <script>
    const messages = document.getElementById("messages");
    const userInput = document.getElementById("userInput");

    function addMessage(role, text) {
      const el = document.createElement("div");
      el.className = "message " + role;
      el.textContent = (role === "user" ? "You: " : "Ballistic: ") + text;
      messages.appendChild(el);
      messages.scrollTop = messages.scrollHeight;
      if (role === "bot" && speechSynthesis) {
        const ut = new SpeechSynthesisUtterance(text);
        ut.lang = "en-US";
        speechSynthesis.speak(ut);
      }
    }

    async function askAI(msg) {
      try {
        const resp = await fetch("/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message: msg })
        });
        const data = await resp.json();
        return data.reply;
      } catch {
        return "Sorry, couldn't connect to AI.";
      }
    }

    async function sendCurrent() {
      const txt = userInput.value.trim();
      if (!txt) return;
      addMessage("user", txt);
      userInput.value = "";
      addMessage("bot", "Thinking...");
      const reply = await askAI(txt);
      messages.lastChild.textContent = "Ballistic: " + reply;
      addMessage("bot", reply); 
    }

    function sendPreset(text) {
      userInput.value = text;
      sendCurrent();
    }

    userInput.addEventListener("keypress", e => {
      if (e.key === "Enter") sendCurrent();
    });
  </script>
</body>
</html>
